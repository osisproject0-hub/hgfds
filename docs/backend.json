
{
  "entities": {
    "VocationalProgram": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VocationalProgram",
      "type": "object",
      "description": "Represents a vocational program offered by the school.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the vocational program."
        },
        "name": {
          "type": "string",
          "description": "Name of the vocational program."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the program, including curriculum overview and skills learned."
        },
        "careerProspects": {
          "type": "string",
          "description": "Potential career paths for graduates of this program."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image representing the program.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "careerProspects",
        "imageUrl"
      ]
    },
    "NewsArticle": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "NewsArticle",
      "type": "object",
      "description": "Represents a news article or announcement.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the news article."
        },
        "title": {
          "type": "string",
          "description": "Title of the news article."
        },
        "content": {
          "type": "string",
          "description": "Main content of the news article."
        },
        "author": {
          "type": "string",
          "description": "Author of the news article."
        },
        "publicationDate": {
          "type": "string",
          "description": "Date and time the news article was published.",
          "format": "date-time"
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image associated with the news article.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "author",
        "publicationDate"
      ]
    },
    "Event": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Event",
      "type": "object",
      "description": "Represents a school event.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the event."
        },
        "name": {
          "type": "string",
          "description": "Name of the event."
        },
        "description": {
          "type": "string",
          "description": "Description of the event."
        },
        "startDate": {
          "type": "string",
          "description": "Date and time the event starts.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date and time the event ends.",
          "format": "date-time"
        },
        "location": {
          "type": "string",
          "description": "Location of the event."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image associated with the event.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "startDate",
        "endDate",
        "location"
      ]
    },
    "GalleryAlbum": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GalleryAlbum",
      "type": "object",
      "description": "Represents a gallery album containing images and videos.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the gallery album."
        },
        "name": {
          "type": "string",
          "description": "Name of the gallery album."
        },
        "description": {
          "type": "string",
          "description": "Description of the gallery album."
        },
        "imageUrls": {
          "type": "array",
          "description": "URLs of images in the album.",
          "items": {
            "type": "string"
          }
        },
        "videoUrls": {
          "type": "array",
          "description": "URLs of videos in the album.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "Application": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Application",
      "type": "object",
      "description": "Represents a student application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the application."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the applicant."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the applicant."
        },
        "email": {
          "type": "string",
          "description": "Email address of the applicant.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the applicant."
        },
        "programId": {
          "type": "string",
          "description": "Reference to VocationalProgram. (Relationship: VocationalProgram 1:N Application)"
        },
        "applicationDate": {
          "type": "string",
          "description": "Date the application was submitted.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the application (e.g., pending, reviewed, accepted, rejected)."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "phoneNumber",
        "programId",
        "applicationDate",
        "status"
      ]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
          "email": { "type": "string", "format": "email" },
          "displayName": { "type": "string" },
          "role": { "type": "string", "enum": ["Super Admin", "Admin", "User"] }
      },
      "required": ["email", "role"]
    },
    "ContactMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactMessage",
      "type": "object",
      "description": "Represents a message submitted through the contact form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact message."
        },
        "name": {
          "type": "string",
          "description": "Name of the person who sent the message."
        },
        "email": {
          "type": "string",
          "description": "Email address of the sender.",
          "format": "email"
        },
        "subject": {
          "type": "string",
          "description": "Subject of the message."
        },
        "message": {
          "type": "string",
          "description": "Content of the message."
        },
        "submittedAt": {
          "type": "string",
          "description": "Date and time the message was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "subject",
        "message",
        "submittedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/vocationalPrograms/{vocationalProgramId}",
        "definition": {
          "entityName": "VocationalProgram",
          "schema": {
            "$ref": "#/backend/entities/VocationalProgram"
          },
          "description": "Stores information about vocational programs offered by the school."
        }
      },
      {
        "path": "/newsArticles/{newsArticleId}",
        "definition": {
          "entityName": "NewsArticle",
          "schema": {
            "$ref": "#/backend/entities/NewsArticle"
          },
          "description": "Stores news articles and announcements."
        }
      },
      {
        "path": "/events/{eventId}",
        "definition": {
          "entityName": "Event",
          "schema": {
            "$ref": "#/backend/entities/Event"
          },
          "description": "Stores information about school events."
        }
      },
      {
        "path": "/galleryAlbums/{galleryAlbumId}",
        "definition": {
          "entityName": "GalleryAlbum",
          "schema": {
            "$ref": "#/backend/entities/GalleryAlbum"
          },
          "description": "Stores gallery albums containing images and videos."
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information for all users, including admins. The 'role' field is used for authorization."
        }
      },
      {
        "path": "/applications/{applicationId}",
        "definition": {
          "entityName": "Application",
          "schema": {
            "$ref": "#/backend/entities/Application"
          },
          "description": "Stores student applications in a single collection for easier admin querying."
        }
      },
      {
        "path": "/contactMessages/{contactMessageId}",
        "definition": {
          "entityName": "ContactMessage",
          "schema": {
            "$ref": "#/backend/entities/ContactMessage"
          },
          "description": "Stores messages submitted through the website's contact form. This allows admins to view user inquiries."
        }
      }
    ],
    "reasoning": "The Firestore data structure has been updated to place the 'applications' collection at the root level. This change significantly simplifies querying for administrators, who now need to list all applications regardless of the user who submitted them. The previous nested structure (`/users/{userId}/applications/{applicationId}`) was ideal for user-specific queries but cumbersome for admin-level data aggregation. By moving it to `/applications/{applicationId}`, we enable straightforward `list` operations for the admin panel while still being able to secure it so that only admins can read all applications and users can only read their own (if needed, through rules). All other collections remain as they were, following principles of structural segregation and role-based access control via the 'role' field in the '/users/{userId}' documents. A new root collection 'contactMessages' has been added to store submissions from the contact form for admin review."
  }
}

    